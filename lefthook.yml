pre-commit:
  piped: true
  jobs:
    - name: lefthook validate
      glob: lefthook.yml
      run: bunx lefthook validate

    - name: format and lint
      run: bunx biome check --write --error-on-warnings --no-errors-on-unmatched {staged_files}
      stage_fixed: true

    - name: type check
      run: bun run typecheck

pre-push:
  piped: true
  jobs:
    - name: lint
      run: bun run lint

    - name: type check
      run: bun run typecheck

    - name: test
      run: bun run test:run
