pre-commit:
  piped: true
  jobs:
    - name: lefthook validate
      glob: lefthook.yml
      run: npx lefthook validate

    - name: format and lint
      run: npx biome check --write --error-on-warnings --no-errors-on-unmatched {staged_files}
      stage_fixed: true

    - name: type check
      run: npm run typecheck

pre-push:
  piped: true
  jobs:
    - name: lint
      run: npm run lint

    - name: type check
      run: npm run typecheck

    - name: test
      run: npm run test:run
